package com.stickpoint.ddmusic.page.node;

import com.stickpoint.ddmusic.common.utils.FontUtil;
import javafx.geometry.Insets;
import javafx.geometry.Pos;
import javafx.scene.layout.Background;
import javafx.scene.layout.BackgroundFill;
import javafx.scene.layout.CornerRadii;
import javafx.scene.layout.HBox;
import javafx.scene.layout.VBox;
import javafx.scene.paint.Color;
import javafx.scene.text.Text;

public class MenuPanel extends VBox {

    private final Text appName;

    public MenuPanel() {
        setPrefWidth(200);
        setMaxWidth(200);
        setMinWidth(200);
        setSpacing(12);
        setPadding(new Insets(20, 0, 0, 0));

        // Logo Âå∫ÂüüÂíåÂ∫îÁî®ÂêçÁß∞ - Ê∞¥Âπ≥Â∏ÉÂ±Ä
        HBox headerPane = new HBox();
        headerPane.setSpacing(12);
        headerPane.setAlignment(Pos.CENTER_LEFT);
        // Âè™‰øùÁïôÂøÖË¶ÅÁöÑ padding
        headerPane.setPadding(new Insets(0, 0, 0, 16));
        headerPane.setStyle("-fx-background-color: transparent;");

        // Logo
        SvgIcon logoIcon = getSvgIcon();
        logoIcon.setFill("#D7000F");

        // Â∫îÁî®ÂêçÁß∞
        appName = new Text("È°∂ÁÇπÈü≥‰πê");
        appName.setFont(FontUtil.loadFont("‰πüÂ≠óÂ∑•ÂéÇÊ∑°Ê∑°Èªë", 16));
        appName.setFill(Color.BLACK);

        // ÁªÑÂêàÂà∞Ê∞¥Âπ≥Â∏ÉÂ±Ä‰∏≠
        headerPane.getChildren().addAll(logoIcon, appName);

        // Ê∑ªÂä†Âà∞È°∂ÈÉ®
        getChildren().add(headerPane);

        // Ê∑ªÂä†ËèúÂçïÈ°π
        addMenuItems();

        // ËÆæÁΩÆËÉåÊôØ
        setBackground(new Background(new BackgroundFill(Color.WHITE, CornerRadii.EMPTY, null)));
    }

    private static SvgIcon getSvgIcon() {
        SvgIcon logoIcon = new SvgIcon("M79.68,0h94.47c10.43,0.41,20.98,1.22,30.94,4.57c23.76,6.47,44.2,23.29,55.92,44.85    c12.01,21.97,15.29,47.84,12.81,72.51c-2.6,24.87-13.07,49.56-31.99,66.38c-11.09,10.28-24.88,17.31-39.4,21.28    c-10.41,2.8-21.23,3.55-31.96,3.66c-22.07,0-44.13,0-66.19,0c-0.01,11.93-0.01,23.86,0.01,35.78c0.13,5.85-0.29,11.81-2.28,17.36    c-5.99,16.98-22.87,28.5-40.4,30.54c-5.73,0.15-11.46,0.09-17.18,0.03c-15.44-1.38-31.2-9.62-38.01-24.08    c-3.6-7.36-4.79-15.75-4.11-23.87c1.31-12.34,9.42-23.05,19.54-29.77c13.58-8.54,30.58-10.97,46.17-7.6    C67.98,170.1,68,128.55,68.01,87.01c-0.36-4.4,1.26-10.46-2.95-13.39c-3.21-1.31-6.23,1.49-8.39,3.58    c-14.63,14.7-29.31,29.36-43.95,44.06c-2,1.88-4.32,3.84-7.2,3.95c-3.12-0.11-3.99-3.68-4.08-6.2    c-0.18-8.34-0.05-16.69-0.06-25.03c0.03-7.63,2.13-15.82,8.24-20.87c7.69-6.34,15.61-12.41,22.89-19.23    c13.35-13.13,25.81-27.34,35.5-43.44C70.99,6.22,73.85,0.39,79.68,0z M135.9,50.44c-2.03,1.02-2.46,3.47-2.36,5.52    c0.02,34.05-0.01,68.11,0.02,102.16c-0.34,2.4,1.4,5.14,4.01,5.05c10,0.25,20.02-0.09,30.02,0.15    c15.57,1.14,31.7-5.49,41.42-17.82c10.08-13.03,13.38-30.27,11.62-46.41c-1.11-12.65-5.86-25.25-14.75-34.49    c-9.25-9.94-23.02-14.86-36.45-14.58c-9.65-0.04-19.3,0.01-28.95-0.04C138.96,50.04,137.35,49.86,135.9,50.44z");
        logoIcon.setIconSize(24, 24);
        return logoIcon;
    }

    private void addMenuItems() {
        // Êé®Ëçê
        MenuItem recommend = new MenuItem("M512 910.242909c-219.554909 0-398.242909-178.734545-398.242909-398.242909 0-219.554909 178.734545-398.242909 398.242909-398.242909 219.554909 0 398.242909 178.734545 398.242909 398.242909 0 219.554909-178.734545 398.242909-398.242909 398.242909m0-853.364364C260.654545 56.878545 56.878545 260.654545 56.878545 512S260.654545 967.121455 512 967.121455 967.121455 763.345455 967.121455 512 763.345455 56.878545 512 56.878545M462.196364 739.607273H391.168c-27.461818 0-49.803636-22.341818-49.803636-49.803637 0-27.415273 22.341818-49.757091 49.803636-49.757091H462.196364c27.415273 0 49.757091 22.341818 49.757091 49.803637 0 27.415273-22.341818 49.757091-49.803637 49.757091m211.502546-439.528728l-116.456728-67.16509a26.205091 26.205091 0 0 0-15.220363-5.306182h-3.165091a26.577455 26.577455 0 0 0-26.251637 23.645091c0 0.698182-0.279273 1.210182-0.325818 1.861818-0.046545 0.465455-0.279273 0.884364-0.279272 1.349818v341.643636a105.332364 105.332364 0 0 0-49.803637-12.939636H391.168a106.728727 106.728727 0 0 0 0 213.317818H462.196364a106.728727 106.728727 0 0 0 106.635636-106.682182c0-2.420364-0.558545-4.701091-0.744727-7.074909h0.744727V305.245091l76.334545 44.125091a28.346182 28.346182 0 0 0 38.81891-10.426182 28.485818 28.485818 0 0 0-10.333091-38.912", 16, "ÂèëÁé∞Èü≥‰πê");
        recommend.setSelected(true);
        recommend.setHoverable(true);

        // Á≤æÈÄâ
        MenuItem jingxuan = new MenuItem("M373.90901 19.097183c82.337229-23.078743 170.491828-24.974156 253.782725-5.68624 43.356088 10.037346 85.388964 25.772852 124.632363 46.765448 71.68 38.194366 134.014063 93.757392 180.183469 160.57369 47.21844 67.960698 77.437765 147.591898 87.105565 229.774156 10.549942 88.547986-2.121909 179.873527-37.371828 261.853132-27.942445 65.505006-69.879953 124.954226-122.009779 173.448196-54.382864 50.711246-119.947474 89.418207-190.733411 112.246612-89.31092 29.027241-186.656484 32.508126-277.922421 10.5261-80.715995-19.419045-156.413318-59.055832-218.473202-114.165867-61.821467-54.657043-110.208149-124.44163-139.390361-201.652899C12.349988 636.751572 1.370896 576.908964 0.596042 516.98291v-6.449173c0.035763-97.107148 28.431199-193.999721 81.21667-275.526333 40.602375-63.132759 95.271339-117.134156 158.892853-156.961676C281.963586 52.141746 326.976671 32.186263 373.90901 19.097183M499.125495 48.088661c-52.797392 1.382817-105.368289 11.837392-154.613271 30.958417-90.944075 35.011502-169.919627 99.753574-222.597812 181.673574-27.131828 42.140163-47.385332 88.714878-59.628032 137.316135-19.216391 76.436414-18.596508 157.772293 1.788125 233.910687 13.530151 50.186729 35.500256 98.096577 64.873202 140.987753 47.015786 68.747474 112.711525 124.703888 188.420768 159.536577 97.572061 45.549523 211.225332 54.871618 315.115437 26.86957 75.077439-20.098533 144.838184-59.59227 200.746915-113.581747 54.204051-51.986775 95.497835-117.301048 119.005727-188.659185 31.399488-94.639534 31.053783-199.507148-0.941746-293.944028-15.07986-44.51241-36.883073-86.771781-64.646706-124.703888C836.246799 169.359348 766.533737 114.416205 687.260163 82.218021 627.870547 57.780303 563.295367 46.300536 499.125495 48.088661zM465.484889 149.487311c33.306822 13.482468 64.301001 33.28298 89.120187 59.389616 32.520047 33.831339 53.679534 77.306636 64.956647 122.570058 16.021607 64.479814 14.519581 132.082887 4.458393 197.373318 13.601676 0.119208 26.428498-6.699511 35.369127-16.665332 13.053318-14.328847 20.62305-32.627334 26.631153-50.806612 9.453225-29.766333 14.22156-60.760512 17.92894-91.695088 1.299371-10.061187 2.014622-20.217742 3.98156-30.183562 1.049034 0.417229 2.002701 1.00135 2.83716 1.776205 31.113388 30.481583 59.806845 63.788405 82.504121 101.088708 22.446938 36.859232 38.778487 78.164936 42.616996 121.413737 4.112689 43.344168-5.340536 87.427427-24.866868 126.193993-19.097183 38.349336-46.705844 71.906496-77.878836 101.064866-30.696158 28.478882-64.813597 53.309988-101.434412 73.635017-5.912736 3.230547-11.896997 6.353807-18.119674 8.95255-36.215506-16.283865-67.674598-42.438184-91.110966-74.421793-27.179511-36.585052-44.79851-79.392782-56.707427-123.142259-4.029243-14.150035-7.128661-28.538487-10.466496-42.855413l-1.049034-0.047683c-15.449406 14.722235-25.987427 34.165122-31.2922 54.75241-5.817369 22.530384-6.079627 46.133644-3.528568 69.152782 3.075576 27.644424 10.204237 54.633201 18.334249 81.168987 2.41993 8.24922 5.090198 16.438836 7.021373 24.819185-76.150314-28.168941-138.973132-89.406286-170.515669-164.078417-22.566147-52.666263-29.527916-112.592317-16.06929-168.548731 10.967171-46.431665 36.513527-89.155949 71.811129-121.199161 28.776903-23.054901 55.276927-49.137695 77.378161-78.713295 27.572899-36.811548 48.195949-79.452386 56.063702-124.978068 3.039814-18.465378 4.422631-37.383749 2.026542-56.016018m41.794459 80.000745c-6.25844 26.988778-16.176577 53.083492-29.027241 77.616577-28.002049 53.453038-68.950128 99.336345-115.739418 137.089639-35.810198 31.876321-58.531315 77.771548-62.548638 125.514506-6.40149 70.130291 22.554226 141.059278 71.942259 190.483073-2.229197-22.113155-2.324563-44.536251 1.168242-66.518277 3.850431-24.306589 12.338068-48.052899 26.070873-68.55674 8.225378-12.576484 18.608428-23.531735 29.623283-33.688289 18.107753-17.249453 36.179744-34.546589 54.299418-51.784121 3.683539 16.450757 7.426682 32.877672 11.134063 49.328428 10.597625 46.169406 19.323679 93.387846 39.744074 136.517439 17.511711 37.860582 43.916368 72.848242 80.143795 94.460722 35.619464-20.7661 68.962049-45.680652 98.013132-74.993993 27.620582-28.061653 51.652992-60.545937 65.457322-97.691269 10.085029-26.833807 13.744726-56.063702 10.204238-84.530664-5.161723-42.116321-24.17546-81.323958-48.434366-115.667893-6.008102 25.200652-14.030827 50.174808-26.893411 72.788638-9.310175 16.236182-21.433667 31.232596-37.145332 41.651409-14.674552 9.858533-32.341234 14.805681-49.960232 14.924889-18.846845 0.119208-37.681769 0.047683-56.516694 0.035763 5.817369-41.842142 13.79241-83.541234 14.829522-125.895972 1.41858-49.864866-3.993481-100.921816-23.591338-147.19851-11.873155-28.097416-29.659045-53.870268-52.773551-73.885355z", 16,"ÁÉ≠Èó®ÈáëÊõ≤");
        jingxuan.setSelected(false);
        jingxuan.setHoverable(true);

        // Êí≠ÂÆ¢
        MenuItem podcast = new MenuItem("M520.588 616.231636l-8.335239-48.436086a112.190673 112.190673 0 0 0 49.682258-199.375629l-124.875755-96.484213a112.51985 112.51985 0 0 0-157.534844 20.232646 112.743221 112.743221 0 0 0 20.197377 157.534845l42.687241 32.988266-30.049184 38.878189-42.663728-32.929485a161.861174 161.861174 0 0 1-29.049895-226.520998c54.443572-70.53799 156.077059-83.552249 226.520998-29.073409l124.875755 96.484214a161.320383 161.320383 0 0 1-71.396202 286.70166zM655.139216 824.553833a159.886111 159.886111 0 0 1-98.247664-33.599595l-124.887511-96.484214c-70.385158-54.38479-83.469955-155.91247-29.038139-226.332897l1.105095-1.387248a160.873642 160.873642 0 0 1 99.352759-58.946246l8.323483 48.436086a111.779201 111.779201 0 0 0-69.773829 41.852541l-1.011044 1.293196a112.343505 112.343505 0 0 0 21.090859 156.206379l124.887511 96.484214a112.754977 112.754977 0 0 0 157.534844-20.209134 112.496338 112.496338 0 0 0-20.162108-157.593626l-42.687241-32.976511 30.107966-38.901701 42.68724 32.917729c70.467452 54.455328 83.469955 156.077059 29.073408 226.544511a160.473927 160.473927 0 0 1-107.288283 61.274 164.412298 164.412298 0 0 1-21.067346 1.422516zM512.005878 1024C229.724599 1024 0.005878 794.340061 0.005878 511.964731S229.724599 0 512.005878 0s511.988244 229.695208 511.988244 511.964731-229.683452 512.035269-511.988244 512.035269z m0-974.846777c-255.241717 0-462.846777 207.699111-462.846777 462.811508s207.605061 462.882046 462.846777 462.882046S974.840899 767.218204 974.840899 511.964731 767.212326 49.153223 512.005878 49.153223z", 16,"ÂàÜ‰∫´‰∏≠ÂøÉ");
        podcast.setHoverable(true);
        podcast.setSelected(false);

        // Êº´Ê∏∏
        MenuItem roam = new MenuItem("M512 966.206061c-61.155556 0-120.50101-12.024242-176.355556-35.684849-53.915152-22.884848-102.4-55.466667-144.032323-97.09899S117.268687 743.434343 94.513131 689.519192c-23.660606-55.854545-35.684848-115.2-35.684848-176.355556s12.024242-120.50101 35.684848-176.355555C117.268687 282.763636 149.979798 234.278788 191.612121 192.646465c41.632323-41.632323 90.117172-74.343434 144.032323-97.09899 55.854545-23.660606 115.2-35.684848 176.355556-35.684849 61.155556 0 120.50101 12.024242 176.355556 35.684849 53.915152 22.884848 102.4 55.466667 144.032323 97.09899 41.632323 41.632323 74.343434 90.117172 97.09899 144.032323 23.660606 55.854545 35.684848 115.2 35.684848 176.355555s-12.024242 120.50101-35.684848 176.355556c-22.884848 53.915152-55.466667 102.4-97.09899 144.032323s-90.117172 74.343434-144.032323 97.09899c-55.854545 23.789899-115.2 35.684848-176.355556 35.684849z m0-859.79798C287.806061 106.408081 105.373737 288.840404 105.373737 513.034343S287.806061 919.660606 512 919.660606s406.626263-182.432323 406.626263-406.626263S736.193939 106.408081 512 106.408081zM512 813.252525c-78.092929 0-151.40202-30.383838-206.610101-85.591919C250.181818 672.581818 219.79798 599.143434 219.79798 521.050505c0-77.963636 30.383838-151.272727 85.462626-206.480808 55.078788-55.208081 128.258586-85.591919 206.222222-85.721212 12.8 0 23.272727 10.343434 23.272728 23.272727 0 12.8-10.343434 23.272727-23.272728 23.272727-135.111111 0.258586-245.139394 110.545455-245.139394 245.656566 0 135.49899 110.157576 245.656566 245.656566 245.656566s245.656566-110.157576 245.656566-245.656566v-0.517172c0-12.8 10.472727-23.272727 23.272727-23.272727s23.272727 10.472727 23.272727 23.272727v0.517172c0 78.092929-30.383838 151.40202-85.591919 206.610101C663.40202 782.868687 590.092929 813.252525 512 813.252525zM512 640.129293h-0.387879c-12.8-0.129293-23.143434-10.472727-23.143434-23.272727s10.472727-23.272727 23.272727-23.272728h0.258586c43.70101 0 79.256566-35.684848 79.256566-79.385858 0-43.830303-35.555556-79.385859-79.385859-79.385859s-79.385859 35.555556-79.385859 79.385859c0 1.939394 0.129293 3.878788 0.258586 5.818182 0.905051 12.8-8.662626 23.919192-21.591919 24.953535-12.8 0.905051-23.919192-8.662626-24.953535-21.591919-0.258586-3.10303-0.387879-6.206061-0.387879-9.179798 0-69.430303 56.50101-125.931313 125.931313-125.931313s125.931313 56.50101 125.931313 125.931313-56.242424 125.931313-125.672727 125.931313z m-0.129293 0z", 16,"ÁÉ≠Èó®ÁîµÂè∞");
        roam.setHoverable(true);
        roam.setSelected(false);


        // ÊàëÁöÑ
        MenuItem myMusic = new MenuItem("M512 989.866667C249.173333 989.866667 34.133333 774.826667 34.133333 512S249.173333 34.133333 512 34.133333s477.866667 215.04 477.866667 477.866667-215.04 477.866667-477.866667 477.866667z m0-904.533334C276.48 85.333333 85.333333 276.48 85.333333 512s191.146667 426.666667 426.666667 426.666667 426.666667-191.146667 426.666667-426.666667S747.52 85.333333 512 85.333333zM512 738.986667c-6.826667 0-13.653333-1.706667-18.773333-6.826667L343.04 580.266667c-10.24-10.24-10.24-25.6 0-35.84s25.6-10.24 35.84 0l133.12 133.12 133.12-133.12c10.24-10.24 25.6-10.24 35.84 0s10.24 25.6 0 35.84l-150.186667 150.186666c-5.12 5.12-11.946667 8.533333-18.773333 8.533334zM512 738.986667c-13.653333 0-25.6-11.946667-25.6-25.6V278.186667c0-13.653333 11.946667-25.6 25.6-25.6s25.6 11.946667 25.6 25.6v435.2c0 13.653333-11.946667 25.6-25.6 25.6z",16, "Êú¨Âú∞‰∏ãËΩΩ");
        myMusic.setHoverable(true);
        myMusic.setSelected(false);

        MenuItem recent = new MenuItem("M508.771 62.025c-248.377 0-449.727 201.353-449.727 449.73s201.349 449.729 449.727 449.729c248.379 0 449.729-201.351 449.729-449.729S757.151 62.025 508.771 62.025z m0 860.35c-226.781 0-410.622-183.841-410.622-410.62 0-226.78 183.841-410.622 410.622-410.622s410.622 183.841 410.622 410.622c0 226.779-183.841 410.62-410.622 410.62z m269.888-508.647H587.546l-59.128-181.671a19.536 19.536 0 0 0-18.589-13.498h-0.086a19.553 19.553 0 0 0-18.56 13.652l-57.372 181.516H243.767a19.552 19.552 0 0 0-18.636 13.635 19.552 19.552 0 0 0 7.37 21.902l147.71 104.167-54.802 179.799a19.55 19.55 0 0 0 7.121 21.46c6.703 4.949 15.774 5.1 22.61 0.383l155.92-106.512 151.406 106.38a19.52 19.52 0 0 0 11.237 3.553c4.104 0 8.209-1.3 11.668-3.86a19.56 19.56 0 0 0 6.893-21.843l-58.011-174.894 155.594-108.576a19.567 19.567 0 0 0 7.469-21.902 19.566 19.566 0 0 0-18.657-13.691zM599.911 534.163c-7.094 4.965-10.093 13.975-7.372 22.187l43.966 132.56-114.055-80.143a19.48 19.48 0 0 0-22.263-0.135L379.046 691.39l42.697-140.079a19.567 19.567 0 0 0-7.436-21.695l-108.881-76.78h142.716c8.527 0 16.079-5.538 18.646-13.652l43.319-137.046 44.654 137.198a19.536 19.536 0 0 0 18.589 13.5h143.117l-116.556 81.327z", 16,"ÊàëÁöÑÊî∂Ëóè");
        recent.setHoverable(true);
        recent.setSelected(false);

        MenuItem myPlaylist = new MenuItem("M516.693333 19.2a495.36 495.36 0 1 0 495.36 495.36A495.786667 495.786667 0 0 0 516.693333 19.2z m0 926.72a431.36 431.36 0 1 1 431.36-431.36 431.786667 431.786667 0 0 1-431.36 431.786667zM548.693333 501.333333V227.84a32 32 0 0 0-64 0v287.146667a31.573333 31.573333 0 0 0 9.813334 22.613333l235.946666 227.413333a32 32 0 1 0 42.666667-46.08z",16, "Êí≠ÊîæÂéÜÂè≤");
        myPlaylist.setHoverable(true);
        myPlaylist.setSelected(false);


        // ÂàõÂª∫ÁöÑÊ≠åÂçï
        //MenuItem created = new MenuItem("üìã", "ÊàëÁöÑÊ≠åÂçï");
        //created.setHoverable(true);

        // Ê∑ªÂä†ÊâÄÊúâËèúÂçïÈ°π
        getChildren().addAll(recommend, jingxuan, podcast, roam,
                myMusic, recent, myPlaylist);
    }

    public void selectItem(int index) {
        for (int i = 0; i < getChildren().size(); i++) {
            if (getChildren().get(i) instanceof MenuItem item) {
                item.setSelected(i == index);
            }
        }
    }
}
